if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((o=>t.resolve(e()).then((()=>o))),(o=>t.resolve(e()).then((()=>{throw o}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...o){uni.__log__?uni.__log__(e,t,...o):console[e].apply(console,[...o,t])}function o(e,t){return"string"==typeof e?t:e}const n=(t=>(o,n=e.getCurrentInstance())=>{!e.isInSSRComponentSetup&&e.injectHook(t,o,n)})("onLoad"),l=[{font_class:"arrow-down",unicode:""},{font_class:"arrow-left",unicode:""},{font_class:"arrow-right",unicode:""},{font_class:"arrow-up",unicode:""},{font_class:"auth",unicode:""},{font_class:"auth-filled",unicode:""},{font_class:"back",unicode:""},{font_class:"bars",unicode:""},{font_class:"calendar",unicode:""},{font_class:"calendar-filled",unicode:""},{font_class:"camera",unicode:""},{font_class:"camera-filled",unicode:""},{font_class:"cart",unicode:""},{font_class:"cart-filled",unicode:""},{font_class:"chat",unicode:""},{font_class:"chat-filled",unicode:""},{font_class:"chatboxes",unicode:""},{font_class:"chatboxes-filled",unicode:""},{font_class:"chatbubble",unicode:""},{font_class:"chatbubble-filled",unicode:""},{font_class:"checkbox",unicode:""},{font_class:"checkbox-filled",unicode:""},{font_class:"checkmarkempty",unicode:""},{font_class:"circle",unicode:""},{font_class:"circle-filled",unicode:""},{font_class:"clear",unicode:""},{font_class:"close",unicode:""},{font_class:"closeempty",unicode:""},{font_class:"cloud-download",unicode:""},{font_class:"cloud-download-filled",unicode:""},{font_class:"cloud-upload",unicode:""},{font_class:"cloud-upload-filled",unicode:""},{font_class:"color",unicode:""},{font_class:"color-filled",unicode:""},{font_class:"compose",unicode:""},{font_class:"contact",unicode:""},{font_class:"contact-filled",unicode:""},{font_class:"down",unicode:""},{font_class:"bottom",unicode:""},{font_class:"download",unicode:""},{font_class:"download-filled",unicode:""},{font_class:"email",unicode:""},{font_class:"email-filled",unicode:""},{font_class:"eye",unicode:""},{font_class:"eye-filled",unicode:""},{font_class:"eye-slash",unicode:""},{font_class:"eye-slash-filled",unicode:""},{font_class:"fire",unicode:""},{font_class:"fire-filled",unicode:""},{font_class:"flag",unicode:""},{font_class:"flag-filled",unicode:""},{font_class:"folder-add",unicode:""},{font_class:"folder-add-filled",unicode:""},{font_class:"font",unicode:""},{font_class:"forward",unicode:""},{font_class:"gear",unicode:""},{font_class:"gear-filled",unicode:""},{font_class:"gift",unicode:""},{font_class:"gift-filled",unicode:""},{font_class:"hand-down",unicode:""},{font_class:"hand-down-filled",unicode:""},{font_class:"hand-up",unicode:""},{font_class:"hand-up-filled",unicode:""},{font_class:"headphones",unicode:""},{font_class:"heart",unicode:""},{font_class:"heart-filled",unicode:""},{font_class:"help",unicode:""},{font_class:"help-filled",unicode:""},{font_class:"home",unicode:""},{font_class:"home-filled",unicode:""},{font_class:"image",unicode:""},{font_class:"image-filled",unicode:""},{font_class:"images",unicode:""},{font_class:"images-filled",unicode:""},{font_class:"info",unicode:""},{font_class:"info-filled",unicode:""},{font_class:"left",unicode:""},{font_class:"link",unicode:""},{font_class:"list",unicode:""},{font_class:"location",unicode:""},{font_class:"location-filled",unicode:""},{font_class:"locked",unicode:""},{font_class:"locked-filled",unicode:""},{font_class:"loop",unicode:""},{font_class:"mail-open",unicode:""},{font_class:"mail-open-filled",unicode:""},{font_class:"map",unicode:""},{font_class:"map-filled",unicode:""},{font_class:"map-pin",unicode:""},{font_class:"map-pin-ellipse",unicode:""},{font_class:"medal",unicode:""},{font_class:"medal-filled",unicode:""},{font_class:"mic",unicode:""},{font_class:"mic-filled",unicode:""},{font_class:"micoff",unicode:""},{font_class:"micoff-filled",unicode:""},{font_class:"minus",unicode:""},{font_class:"minus-filled",unicode:""},{font_class:"more",unicode:""},{font_class:"more-filled",unicode:""},{font_class:"navigate",unicode:""},{font_class:"navigate-filled",unicode:""},{font_class:"notification",unicode:""},{font_class:"notification-filled",unicode:""},{font_class:"paperclip",unicode:""},{font_class:"paperplane",unicode:""},{font_class:"paperplane-filled",unicode:""},{font_class:"person",unicode:""},{font_class:"person-filled",unicode:""},{font_class:"personadd",unicode:""},{font_class:"personadd-filled",unicode:""},{font_class:"personadd-filled-copy",unicode:""},{font_class:"phone",unicode:""},{font_class:"phone-filled",unicode:""},{font_class:"plus",unicode:""},{font_class:"plus-filled",unicode:""},{font_class:"plusempty",unicode:""},{font_class:"pulldown",unicode:""},{font_class:"pyq",unicode:""},{font_class:"qq",unicode:""},{font_class:"redo",unicode:""},{font_class:"redo-filled",unicode:""},{font_class:"refresh",unicode:""},{font_class:"refresh-filled",unicode:""},{font_class:"refreshempty",unicode:""},{font_class:"reload",unicode:""},{font_class:"right",unicode:""},{font_class:"scan",unicode:""},{font_class:"search",unicode:""},{font_class:"settings",unicode:""},{font_class:"settings-filled",unicode:""},{font_class:"shop",unicode:""},{font_class:"shop-filled",unicode:""},{font_class:"smallcircle",unicode:""},{font_class:"smallcircle-filled",unicode:""},{font_class:"sound",unicode:""},{font_class:"sound-filled",unicode:""},{font_class:"spinner-cycle",unicode:""},{font_class:"staff",unicode:""},{font_class:"staff-filled",unicode:""},{font_class:"star",unicode:""},{font_class:"star-filled",unicode:""},{font_class:"starhalf",unicode:""},{font_class:"trash",unicode:""},{font_class:"trash-filled",unicode:""},{font_class:"tune",unicode:""},{font_class:"tune-filled",unicode:""},{font_class:"undo",unicode:""},{font_class:"undo-filled",unicode:""},{font_class:"up",unicode:""},{font_class:"top",unicode:""},{font_class:"upload",unicode:""},{font_class:"upload-filled",unicode:""},{font_class:"videocam",unicode:""},{font_class:"videocam-filled",unicode:""},{font_class:"vip",unicode:""},{font_class:"vip-filled",unicode:""},{font_class:"wallet",unicode:""},{font_class:"wallet-filled",unicode:""},{font_class:"weibo",unicode:""},{font_class:"weixin",unicode:""}],a=(e,t)=>{const o=e.__vccOpts||e;for(const[n,l]of t)o[n]=l;return o};const s=a({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""},fontFamily:{type:String,default:""}},data:()=>({icons:l}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?e.unicode:""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e},styleObj(){return""!==this.fontFamily?`color: ${this.color}; font-size: ${this.iconSize}; font-family: ${this.fontFamily};`:`color: ${this.color}; font-size: ${this.iconSize};`}},methods:{_onClick(){this.$emit("click")}}},[["render",function(t,o,n,l,a,s){return e.openBlock(),e.createElementBlock("text",{style:e.normalizeStyle(s.styleObj),class:e.normalizeClass(["uni-icons",["uniui-"+n.type,n.customPrefix,n.customPrefix?n.type:""]]),onClick:o[0]||(o[0]=(...e)=>s._onClick&&s._onClick(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)}],["__scopeId","data-v-5610c8db"]]),c=["{","}"];const i=/^(?:\d)+/,r=/^(?:\w)+/;const d="zh-Hans",u="zh-Hant",p="en",m=Object.prototype.hasOwnProperty,f=(e,t)=>m.call(e,t),h=new class{constructor(){this._caches=Object.create(null)}interpolate(e,t,o=c){if(!t)return[e];let n=this._caches[e];return n||(n=function(e,[t,o]){const n=[];let l=0,a="";for(;l<e.length;){let s=e[l++];if(s===t){a&&n.push({type:"text",value:a}),a="";let t="";for(s=e[l++];void 0!==s&&s!==o;)t+=s,s=e[l++];const c=s===o,d=i.test(t)?"list":c&&r.test(t)?"named":"unknown";n.push({value:t,type:d})}else a+=s}return a&&n.push({type:"text",value:a}),n}(e,o),this._caches[e]=n),function(e,t){const o=[];let n=0;const l=Array.isArray(t)?"list":(a=t,null!==a&&"object"==typeof a?"named":"unknown");var a;if("unknown"===l)return o;for(;n<e.length;){const a=e[n];switch(a.type){case"text":o.push(a.value);break;case"list":o.push(t[parseInt(a.value,10)]);break;case"named":"named"===l&&o.push(t[a.value])}n++}return o}(n,t)}};function g(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if("chinese"===(e=e.toLowerCase()))return d;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?d:e.indexOf("-hant")>-1?u:(o=e,["-tw","-hk","-mo","-cht"].find((e=>-1!==o.indexOf(e)))?u:d);var o;let n=[p,"fr","es"];t&&Object.keys(t).length>0&&(n=Object.keys(t));const l=function(e,t){return t.find((t=>0===e.indexOf(t)))}(e,n);return l||void 0}class v{constructor({locale:e,fallbackLocale:t,messages:o,watcher:n,formater:l}){this.locale=p,this.fallbackLocale=p,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=l||h,this.messages=o||{},this.setLocale(e||p),n&&this.watchLocale(n)}setLocale(e){const t=this.locale;this.locale=g(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach((e=>{e(this.locale,t)}))}getLocale(){return this.locale}watchLocale(e){const t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,o=!0){const n=this.messages[e];n?o?Object.assign(n,t):Object.keys(t).forEach((e=>{f(n,e)||(n[e]=t[e])})):this.messages[e]=t}f(e,t,o){return this.formater.interpolate(e,t,o).join("")}t(e,t,o){let n=this.message;return"string"==typeof t?(t=g(t,this.messages))&&(n=this.messages[t]):o=t,f(n,e)?this.formater.interpolate(n[e],o).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}}const _={en:{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},"zh-Hans":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"请输入搜索内容"},"zh-Hant":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"請輸入搜索內容"}},{t:w}=function(e,t={},o,n){if("string"!=typeof e){const o=[t,e];e=o[0],t=o[1]}"string"!=typeof e&&(e="undefined"!=typeof uni&&uni.getLocale?uni.getLocale():"undefined"!=typeof global&&global.getLocale?global.getLocale():p),"string"!=typeof o&&(o="undefined"!=typeof __uniConfig&&__uniConfig.fallbackLocale||p);const l=new v({locale:e,fallbackLocale:o,messages:t,watcher:n});let a=(e,t)=>{if("function"!=typeof getApp)a=function(e,t){return l.t(e,t)};else{let e=!1;a=function(t,o){const n=getApp().$vm;return n&&(n.$locale,e||(e=!0,function(e,t){e.$watchLocale?e.$watchLocale((e=>{t.setLocale(e)})):e.$watch((()=>e.$locale),(e=>{t.setLocale(e)}))}(n,l))),l.t(t,o)}}return a(e,t)};return{i18n:l,f:(e,t,o)=>l.f(e,t,o),t:(e,t)=>a(e,t),add:(e,t,o=!0)=>l.add(e,t,o),watch:e=>l.watchLocale(e),getLocale:()=>l.getLocale(),setLocale:e=>l.setLocale(e)}}(_);const y=a({name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:""},bgColor:{type:String,default:"#F8F8F8"},textColor:{type:String,default:"#000000"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||w("uni-search-bar.cancel")},placeholderText(){return this.placeholder||w("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){if(e){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(e,t){this.$emit("input",e),this.$emit("update:modelValue",e)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.searchVal="",this.$nextTick((()=>{this.$emit("clear",{value:""})}))},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,plus.key.hideSoftKeybord())},confirm(){plus.key.hideSoftKeybord(),this.$emit("confirm",{value:this.searchVal})},blur(){plus.key.hideSoftKeybord(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}},[["render",function(t,n,l,a,c,i){const r=o(e.resolveDynamicComponent("uni-icons"),s);return e.openBlock(),e.createElementBlock("view",{class:"uni-searchbar"},[e.createElementVNode("view",{style:e.normalizeStyle({borderRadius:l.radius+"px",backgroundColor:l.bgColor}),class:"uni-searchbar__box",onClick:n[5]||(n[5]=(...e)=>i.searchClick&&i.searchClick(...e))},[e.createElementVNode("view",{class:"uni-searchbar__box-icon-search"},[e.renderSlot(t.$slots,"searchIcon",{},(()=>[e.createVNode(r,{color:"#c0c4cc",size:"18",type:"search"})]),!0)]),c.show||c.searchVal?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,focus:c.showSync,disabled:l.readonly,placeholder:i.placeholderText,maxlength:l.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>c.searchVal=e),style:e.normalizeStyle({color:l.textColor}),onConfirm:n[1]||(n[1]=(...e)=>i.confirm&&i.confirm(...e)),onBlur:n[2]||(n[2]=(...e)=>i.blur&&i.blur(...e)),onFocus:n[3]||(n[3]=(...e)=>i.emitFocus&&i.emitFocus(...e))},null,44,["focus","disabled","placeholder","maxlength"])),[[e.vModelText,c.searchVal]]):(e.openBlock(),e.createElementBlock("text",{key:1,class:"uni-searchbar__text-placeholder"},e.toDisplayString(l.placeholder),1)),c.show&&("always"===l.clearButton||"auto"===l.clearButton&&""!==c.searchVal)&&!l.readonly?(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-searchbar__box-icon-clear",onClick:n[4]||(n[4]=(...e)=>i.clear&&i.clear(...e))},[e.renderSlot(t.$slots,"clearIcon",{},(()=>[e.createVNode(r,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])):e.createCommentVNode("",!0)],4),"always"===l.cancelButton||c.show&&"auto"===l.cancelButton?(e.openBlock(),e.createElementBlock("text",{key:0,onClick:n[6]||(n[6]=(...e)=>i.cancel&&i.cancel(...e)),class:"uni-searchbar__cancel"},e.toDisplayString(i.cancelTextI18n),1)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-2ba324d9"]]),k="http://192.168.216.100:8888",b={__name:"bookstore",setup(n){const l=e.ref(""),a=e.ref([]),c=e.ref([]),i=e.computed((()=>{const e=[];for(let t=0;t<a.value.length;t+=4)e.push(a.value.slice(t,t+4));return e})),r=()=>{uni.navigateTo({url:"/pages/search/search"})},d=()=>{uni.navigateTo({url:"/pages/sort/sort"})},u=e=>{if(!e)return"";const t=new Date(e);return`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}:${String(t.getSeconds()).padStart(2,"0")}`},p=e=>{uni.navigateTo({url:`/pages/novel_details/novel_details?novel_id=${e}`})};return e.onMounted((async()=>{try{const e=await new Promise(((e,t)=>{uni.request({url:`${k}/api/hot-novels`,method:"GET",success:t=>{e(t.data)},fail:e=>{t(e)}})}));a.value=e,t("log","at pages/bookstore/bookstore.vue:141","后端传来的热门推荐小说数据:",e);const o=await new Promise(((e,t)=>{uni.request({url:`${k}/api/getNewArrivalBooks`,method:"GET",success:o=>{200===o.statusCode?e(o.data):t(new Error("请求失败，状态码："+o.statusCode))},fail:e=>{t(e)}})}));t("log","at pages/bookstore/bookstore.vue:145","后端传来的最新上架小说数据:",o),o.sort(((e,t)=>new Date(t.upload_time)-new Date(e.upload_time))),c.value=o}catch(e){t("error","at pages/bookstore/bookstore.vue:152","获取数据失败:",e)}})),(t,n)=>{const a=o(e.resolveDynamicComponent("uni-icons"),s),m=o(e.resolveDynamicComponent("uni-search-bar"),y);return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"head"},[e.createElementVNode("view",{class:"search-box",onClick:r},[e.createVNode(m,{modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=e=>l.value=e),placeholder:"请输入搜索内容",radius:"5",cancelButton:"none",readonly:""},{searchIcon:e.withCtx((()=>[e.createVNode(a,{type:"search",size:"18",color:"#999"})])),_:1},8,["modelValue"])]),e.createElementVNode("view",{class:"sort-box",onClick:d},[e.createElementVNode("image",{class:"sort-icon",src:"/static/icons/sort.png"}),e.createElementVNode("view",{class:"sort-text"}," 分类 ")])]),e.createElementVNode("view",{class:"hot-recommend"},[e.createElementVNode("view",{class:"title"},"热门推荐"),e.createElementVNode("view",{class:"scroll-view"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,((t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"book-group",key:o},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,((t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"book-item",key:o,onClick:e=>p(t.novel_id)},[e.createElementVNode("view",{class:"book-name"},e.toDisplayString(t.novel_name),1),e.createElementVNode("view",{class:"book-sort"},e.toDisplayString(t.novel_sort),1),e.createElementVNode("view",{class:"book-like-count"},"点赞数: "+e.toDisplayString(t.likeCount),1)],8,["onClick"])))),128))])))),128))])]),e.createElementVNode("view",{class:"new-arrival"},[e.createElementVNode("view",{class:"title"},"最新上架"),e.createElementVNode("view",{class:"book-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,((t,o)=>{return e.openBlock(),e.createElementBlock("view",{class:"book-item",key:o,onClick:e=>p(t.novel_id)},[e.createElementVNode("view",{class:"book-info"},[e.createElementVNode("span",{class:"book-name"},e.toDisplayString((n=t.novel_name,n.length>20?n.slice(0,20)+"...":n)),1),e.createElementVNode("div",{class:"book-type-time"},[e.createElementVNode("span",{class:"book-type"},e.toDisplayString(t.novel_sort),1),e.createElementVNode("span",{class:"book-upload-time"},e.toDisplayString(u(t.upload_time)),1)])])],8,["onClick"]);var n})),128))])])])}}};const E=a({data:()=>({books:[{cover:"https://example.com/book1.jpg",title:"书名1"},{cover:"https://example.com/book2.jpg",title:"书名2"},{cover:"https://example.com/book3.jpg",title:"书名3"},{cover:"https://example.com/book4.jpg",title:"书名4"},{cover:"https://example.com/book5.jpg",title:"书名5"},{cover:"https://example.com/book6.jpg",title:"书名6"},{cover:"https://example.com/book7.jpg",title:"书名7"},{cover:"https://example.com/book8.jpg",title:"书名8"},{cover:"https://example.com/book9.jpg",title:"书名9"},{cover:"https://example.com/book10.jpg",title:"书名10"},{cover:"https://example.com/book11.jpg",title:"书名11"},{cover:"https://example.com/book12.jpg",title:"书名12"}]}),methods:{}},[["render",function(t,o,n,l,a,s){return e.openBlock(),e.createElementBlock("scroll-view",{class:"book-shelf","scroll-y":"true"},[e.createElementVNode("view",{class:"grid-container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.books,((t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"book-item",key:o},[e.createElementVNode("image",{src:t.cover,class:"book-cover"},null,8,["src"]),e.createElementVNode("view",{class:"book-title"},e.toDisplayString(t.title),1)])))),128))])])}]]);const V=a({data:()=>({}),methods:{goToPage(e){switch(e){case"points":uni.navigateTo({url:"/pages/points/points"});break;case"downloads":uni.navigateTo({url:"/pages/downloads/downloads"});break;case"collections":uni.navigateTo({url:"/pages/collections/collections"});break;case"settings":uni.navigateTo({url:"/pages/settings/settings"});break;default:uni.showToast({title:"功能暂未开放",icon:"none"})}},showActionSheet(){uni.showActionSheet({itemList:["登录","退出登录"],success:function(e){e.cancel||(0===e.tapIndex?uni.navigateTo({url:"/pages/login/login"}):1===e.tapIndex&&(uni.removeStorageSync("token"),t("log","at pages/profile/profile.vue:74","已退出登录"),uni.reLaunch({url:"/pages/profile/profile"})))},fail:function(e){t("log","at pages/profile/profile.vue:81","操作菜单显示失败",e)}})}}},[["render",function(t,n,l,a,c,i){const r=o(e.resolveDynamicComponent("uni-icons"),s);return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"more-icon",onClick:n[0]||(n[0]=(...e)=>i.showActionSheet&&i.showActionSheet(...e))},[e.createVNode(r,{type:"bars",size:"20",color:"#666"})]),e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("view",{class:"avatar"},[e.createElementVNode("image",{src:"https://example.com/avatar.jpg",class:"avatar-image"})]),e.createElementVNode("view",{class:"username-wrapper"},[e.createElementVNode("view",{class:"username"},"用户名")])]),e.createElementVNode("view",{class:"function-section"},[e.createElementVNode("view",{class:"function-item",onClick:n[1]||(n[1]=e=>i.goToPage("points"))},[e.createVNode(r,{type:"star-filled",size:"24",color:"#ffcc00"}),e.createElementVNode("text",null,"积分")]),e.createElementVNode("view",{class:"function-item",onClick:n[2]||(n[2]=e=>i.goToPage("downloads"))},[e.createVNode(r,{type:"download-filled",size:"24",color:"#007aff"}),e.createElementVNode("text",null,"下载")]),e.createElementVNode("view",{class:"function-item",onClick:n[3]||(n[3]=e=>i.goToPage("collections"))},[e.createVNode(r,{type:"star-filled",size:"24",color:"#ff5500"}),e.createElementVNode("text",null,"收藏")]),e.createElementVNode("view",{class:"function-item",onClick:n[4]||(n[4]=e=>i.goToPage("settings"))},[e.createVNode(r,{type:"gear-filled",size:"24",color:"#ff5500"}),e.createElementVNode("text",null,"设置")])])])}]]);const N=a({data:()=>({selectedOption:null,poemQuestion:"床前明月光",poemAnswer:"",wordQuestion:"w_tch",wordAnswer:""}),methods:{selectOption(e){this.selectedOption=e},submitAnswer(){let e=!1;("poem"===this.selectedOption&&"疑是地上霜"===this.poemAnswer.trim()||"word"===this.selectedOption&&"a"===this.wordAnswer.trim())&&(e=!0),e?uni.showToast({title:"签到成功！",icon:"success",duration:2e3}):uni.showToast({title:"答案错误，请重试！",icon:"none",duration:2e3})}}},[["render",function(t,o,n,l,a,s){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"title"},"请选择签到的方式"),e.createElementVNode("view",{class:"sign-in-options"},[e.createElementVNode("view",{class:"option",onClick:o[0]||(o[0]=e=>s.selectOption("poem"))},"古诗词签到"),e.createElementVNode("view",{class:"option",onClick:o[1]||(o[1]=e=>s.selectOption("word"))},"单词拼写签到")]),a.selectedOption?(e.openBlock(),e.createElementBlock("view",{key:0,class:"sign-in-content"},["poem"===a.selectedOption?(e.openBlock(),e.createElementBlock("view",{key:0,class:"poem-section"},[e.createElementVNode("view",{class:"poem-question"},[e.createTextVNode("请填写古诗词的下句："),e.createElementVNode("br"),e.createTextVNode('"'+e.toDisplayString(a.poemQuestion)+'"',1)]),e.withDirectives(e.createElementVNode("input",{class:"poem-answer","onUpdate:modelValue":o[2]||(o[2]=e=>a.poemAnswer=e),placeholder:"请输入答案"},null,512),[[e.vModelText,a.poemAnswer]])])):e.createCommentVNode("",!0),"word"===a.selectedOption?(e.openBlock(),e.createElementBlock("view",{key:1,class:"word-section"},[e.createElementVNode("view",{class:"word-question"},[e.createTextVNode("请填写单词的缺失字母："),e.createElementVNode("br"),e.createTextVNode('"'+e.toDisplayString(a.wordQuestion)+'"',1)]),e.withDirectives(e.createElementVNode("input",{class:"word-answer","onUpdate:modelValue":o[3]||(o[3]=e=>a.wordAnswer=e),placeholder:"请输入答案"},null,512),[[e.vModelText,a.wordAnswer]])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"sign-in-button",onClick:o[4]||(o[4]=(...e)=>s.submitAnswer&&s.submitAnswer(...e))},"签到")])}]]);const B=a({data:()=>({novelFilePath:null,selectedCategory:null,categories:["玄幻","武侠","都市","言情","科幻","历史","悬疑","穿越","重生","灵异","游戏","竞技","轻小说","其他"]}),methods:{chooseFile(){const e=this;if("android"===uni.getSystemInfoSync().platform){const t=plus.android.importClass("android.content.Intent"),o=plus.android.importClass("java.io.File");plus.android.importClass("android.net.Uri");const n=new t(t.ACTION_GET_CONTENT);n.setType("*/*"),n.putExtra(t.EXTRA_ALLOW_MULTIPLE,!1),plus.android.ready((function(){plus.android.runtimeMainActivity().startActivityForResult(n,1e3),plus.android.overrideBackPress((function(){})),plus.android.onActivityResult=function(t,n,l){if(1e3===t&&n===plus.android.RESULT_OK){const t=l.getData(),n=e.getRealPathFromURI(t),a=new o(n),s=a.length(),c=a.getName().split(".").pop().toLowerCase();if(s>10485760)return void uni.showToast({title:"文件大小不能超过10MB",icon:"none",duration:2e3});if(!["txt","epub","pdf"].includes(c))return void uni.showToast({title:"只能上传txt/epub/pdf文件",icon:"none",duration:2e3});e.novelFilePath=n,uni.showToast({title:"文件选择成功",icon:"success",duration:2e3})}}}))}else uni.chooseFile({count:1,type:"file",success:t=>{if(t.tempFiles[0].size>10485760)return void uni.showToast({title:"文件大小不能超过10MB",icon:"none",duration:2e3});const o=t.tempFiles[0].name.split(".").pop().toLowerCase();["txt","epub","pdf"].includes(o)?(e.novelFilePath=t.tempFiles[0].path,uni.showToast({title:"文件选择成功",icon:"success",duration:2e3})):uni.showToast({title:"只能上传txt/epub/pdf文件",icon:"none",duration:2e3})},fail:e=>{t("error","at pages/upload/upload.vue:113","选择文件失败",e),uni.showToast({title:"选择文件失败",icon:"none",duration:2e3})}})},getRealPathFromURI(e){const t=plus.android.runtimeMainActivity();plus.android.importClass("android.content.ContentResolver");const o=t.getContentResolver().query(e,null,null,null,null);if(null!=o&&o.moveToFirst()){const e=o.getColumnIndexOrThrow(android.provider.MediaStore.Images.Media.DATA),t=o.getString(e);return o.close(),t}return null},onCategoryChange(e){this.selectedCategory=this.categories[e.detail.value]},upload(){if(!this.novelFilePath)return void uni.showToast({title:"请先选择小说文件",icon:"none",duration:2e3});if(!this.selectedCategory)return void uni.showToast({title:"请选择小说类型",icon:"none",duration:2e3});var e;(e="FileUploadModule",weex.requireModule(e)).uploadFile(this.novelFilePath,"your_upload_api_url",(e=>{e.success?uni.showToast({title:"上传成功",icon:"success",duration:2e3}):(t("error","at pages/upload/upload.vue:174","上传失败：",e.message),uni.showToast({title:"上传失败",icon:"none",duration:2e3}))}))}}},[["render",function(t,o,n,l,a,s){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("text",{class:"label"},"选择文件"),e.createElementVNode("button",{class:"file-button",onClick:o[0]||(o[0]=(...e)=>s.chooseFile&&s.chooseFile(...e))},"选取文件"),e.createElementVNode("text",{class:"file-tip"},"只能上传txt/epub/pdf文件，且不超过10MB")]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("text",{class:"label"},"小说类型"),e.createElementVNode("picker",{class:"type-picker",range:a.categories,onChange:o[1]||(o[1]=(...e)=>s.onCategoryChange&&s.onCategoryChange(...e))},[e.createElementVNode("view",{class:"type-placeholder"},e.toDisplayString(a.selectedCategory||"请选择小说类型"),1)],40,["range"])]),e.createElementVNode("view",{class:"upload-button"},[e.createElementVNode("button",{class:"upload-btn",onClick:o[2]||(o[2]=(...e)=>s.upload&&s.upload(...e))},"上传")])])}]]);const C=a({data:()=>({searchKeyword:"",searchHistory:[],rankList:[{title:"热搜榜",color:"linear-gradient(135deg, #ff7e5f, #feb47b)"},{title:"巅峰榜",color:"linear-gradient(135deg, #00b09b, #96c93d)"},{title:"分类榜",color:"linear-gradient(135deg, #8e2de2, #4a00e0)"},{title:"评论榜",color:"linear-gradient(135deg, #ff5f6d, #ffc371)"}]}),methods:{onInput(){t("log","at pages/search/search.vue:68","输入内容：",this.searchKeyword)},async onSearch(){if(t("log","at pages/search/search.vue:71","搜索内容：",this.searchKeyword),""!==this.searchKeyword.trim()){this.searchHistory.push(this.searchKeyword.trim()),this.searchKeyword="";try{const o=await(e=this.searchHistory[this.searchHistory.length-1],new Promise(((t,o)=>{uni.request({url:`${k}/api/search`,method:"GET",data:{keyword:e},success:e=>{t(e.data)},fail:e=>{o(e)}})})));t("log","at pages/search/search.vue:78","搜索结果:",o),uni.navigateTo({url:`/pages/search_result/search_result?novelIds=${o.join(",")}`})}catch(o){t("error","at pages/search/search.vue:84","搜索请求出错:",o)}}var e},removeHistory(e){this.searchHistory.splice(e,1)},clearAllHistory(){this.searchHistory=[]},selectRank(e){t("log","at pages/search/search.vue:95","Selected rank:",e)}}},[["render",function(t,n,l,a,c,i){const r=o(e.resolveDynamicComponent("uni-icons"),s),d=o(e.resolveDynamicComponent("uni-search-bar"),y);return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"search-box"},[e.createVNode(d,{modelValue:c.searchKeyword,"onUpdate:modelValue":n[0]||(n[0]=e=>c.searchKeyword=e),placeholder:"请输入搜索内容",radius:"5",cancelButton:"none",onConfirm:i.onSearch,onInput:i.onInput},{searchIcon:e.withCtx((()=>[e.createVNode(r,{type:"search",size:"18",color:"#999"})])),_:1},8,["modelValue","onConfirm","onInput"])]),c.searchHistory.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"history-box"},[e.createElementVNode("view",{class:"history-header"},[e.createElementVNode("text",{class:"history-title"},"搜索历史"),e.createElementVNode("image",{src:"/static/icons/deleteAll.png",class:"clear-all-icon",onClick:n[1]||(n[1]=(...e)=>i.clearAllHistory&&i.clearAllHistory(...e))})]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.searchHistory,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o,class:"history-item"},[e.createElementVNode("text",null,e.toDisplayString(t),1),e.createElementVNode("image",{src:"/static/icons/deleteOne.png",class:"clear-one-icon",onClick:e=>i.removeHistory(o)},null,8,["src","onClick"])])))),128))])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.rankList,((t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"rank-item",key:o,onClick:e=>i.selectRank(o)},[e.createElementVNode("view",{class:"rank-title"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"rank-bg",style:e.normalizeStyle({backgroundImage:t.color})},null,4)],8,["onClick"])))),128))])])}]]);const S=a({data:()=>({categories:["热门标签","玄幻","都市","历史","仙侠","奇幻","武侠","悬疑"],categoryContent:{"热门标签":["标签1","标签2","标签3"],"玄幻":["玄幻1","玄幻2","玄幻3"],"都市":["都市1","都市2","都市3"],"历史":["历史1","历史2","历史3"],"仙侠":["仙侠1","仙侠2","仙侠3"],"奇幻":["奇幻1","奇幻2","奇幻3"],"武侠":["武侠1","武侠2","武侠3"],"悬疑":["悬疑1","悬疑2","悬疑3"]},selectedCategory:"热门标签"}),computed:{selectedCategoryContent(){return this.categoryContent[this.selectedCategory]}},methods:{selectCategory(e){this.selectedCategory=this.categories[e]}}},[["render",function(t,o,n,l,a,s){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"sort"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.categories,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o,class:"sort_one",onClick:e=>s.selectCategory(o)},e.toDisplayString(t),9,["onClick"])))),128))]),e.createElementVNode("view",{class:"label"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.selectedCategoryContent,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o,class:"label_sort"},e.toDisplayString(t),1)))),128))])])}]]),x=e=>new Promise(((t,o)=>{uni.request({url:`${k}/api/novel_details`,method:"GET",data:{novel_id:e},success:e=>{t(e.data)},fail:e=>{o(e)}})})),T=e=>new Promise(((t,o)=>{const n=uni.getStorageSync("token"),l={"Content-Type":"application/x-www-form-urlencoded"};n?(l.Authorization=`Bearer ${n}`,uni.request({...e,header:l,success:e=>{401===e.statusCode?(uni.showToast({title:"登录失效，请重新登录",icon:"none"}),o(new Error("登录失效，请重新登录"))):t(e.data)},fail:e=>{o(e)}})):o(new Error("请先登录"))})),I=a({__name:"LikeButton",props:{novelId:{type:String,required:!0},novelDetails:{type:[Object,null],required:!0}},setup(o){const n=o,l=e.ref(uni.getStorageSync("userId")),a=e=>{uni.showToast({title:e,icon:"none"})},s=()=>{var e;t("log","at components/LikeButton.vue:30","点赞操作，小说 ID:",n.novelId,"用户 ID:",l.value),(e=n.novelId,new Promise(((t,o)=>{T({url:`${k}/api/like`,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{novel_id:e}}).then((e=>{t(e)})).catch((e=>{o(e)}))}))).then((e=>{"string"==typeof e&&e.includes("您已经点赞过了")?a("您已经点赞过了"):(t("log","at components/LikeButton.vue:36","后端返回的点赞操作结果数据:",e),t("log","at components/LikeButton.vue:37","点赞成功:",n.novelId),n.novelDetails&&n.novelDetails.likeCount++)})).catch((e=>{const o={"登录失效，请重新登录":"登录失效，请重新登录","请先登录":"请先登录"}[e.message];o?a(o):t("error","at components/LikeButton.vue:52","点赞失败:",e)}))};return(t,o)=>(e.openBlock(),e.createElementBlock("button",{onClick:s},"点赞"))}},[["__scopeId","data-v-7326ac2a"]]),A=a({__name:"CommentButton",props:{novelId:{type:String,required:!0}},setup(o){const n=o,l=e.ref(!1),a=e.ref("");e.ref(uni.getStorageSync("userId"));const s=e=>{uni.showToast({title:e,icon:"none"})},c=()=>{uni.getStorageSync("token")?(t("log","at components/CommentButton.vue:43","显示评论框"),l.value=!0):s("请先登录")},i=()=>{t("log","at components/CommentButton.vue:48","隐藏评论框"),l.value=!1,a.value=""},r=()=>{var e,o;""!==a.value.trim()?(t("log","at components/CommentButton.vue:58","提交评论，小说 ID:",n.novelId,"评论内容:",a.value),(e=n.novelId,o=a.value,T({url:`${k}/api/comment`,method:"POST",data:{novelId:e,comment:o}})).then((e=>{t("log","at components/CommentButton.vue:61","后端返回的评论操作结果数据:",e),uni.showToast({title:"评论提交成功",icon:"success"}),i()})).catch((e=>{t("error","at components/CommentButton.vue:69","评论提交失败:",e),s("评论提交失败，请稍后重试")}))):s("评论内容不能为空")};return(t,o)=>(e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("button",{class:"common-button",onClick:c},"评论"),l.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"comment-box"},[e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),placeholder:"请输入评论内容"},null,512),[[e.vModelText,a.value]]),e.createElementVNode("view",{class:"comment-buttons"},[e.createElementVNode("button",{class:"common-button",onClick:r},"提交"),e.createElementVNode("button",{class:"common-button",onClick:i},"取消")])])):e.createCommentVNode("",!0)]))}},[["__scopeId","data-v-b05feed0"]]),D=a({__name:"AddTagButton",setup(o){const l=e.ref("");e.ref(uni.getStorageSync("userId")),n((e=>{e.novel_id&&(l.value=e.novel_id)}));const a=e=>{uni.showToast({title:e,icon:"none"})},s=async()=>{uni.getStorageSync("token")?uni.showModal({title:"添加标签",content:"请输入要添加的标签",editable:!0,success:async e=>{if(e.confirm){const n=e.content;try{const e=await((e,t)=>T({url:`${k}/api/add_tag`,method:"POST",data:{novel_id:e,tag:t}}))(l.value,n);t("log","at components/AddTagButton.vue:42","后端返回的添加标签操作结果数据:",e),e&&"string"==typeof e&&e.includes("标签添加成功")?uni.showToast({title:"标签添加成功",icon:"success"}):a("标签添加失败")}catch(o){const e={"登录失效，请重新登录":"登录失效，请重新登录","请先登录":"请先登录"}[o.message];e?a(e):(t("error","at components/AddTagButton.vue:60","添加标签失败:",o),a("标签添加失败"))}}}}):a("请先登录")};return(t,o)=>(e.openBlock(),e.createElementBlock("button",{onClick:s},"添加标签"))}},[["__scopeId","data-v-6e4cdfe2"]]),L=a({__name:"DownloadButton",setup(o){const l=e.ref(""),a=e.ref(uni.getStorageSync("userId"));n((e=>{e.novel_id&&(l.value=e.novel_id)}));const s=()=>{t("log","at components/DownloadButton.vue:19","下载操作，小说 ID:",l.value,"用户 ID:",a.value)};return(t,o)=>(e.openBlock(),e.createElementBlock("button",{onClick:s},"下载"))}},[["__scopeId","data-v-0a361d89"]]),P=a({__name:"CommentBox",setup(o){const l=e.ref([]),a=e.ref("");return n((e=>{e.novel_id&&(a.value=e.novel_id)})),e.onMounted((()=>{a.value&&x(a.value).then((e=>{e&&e.comments&&(l.value=e.comments)})).catch((e=>{t("error","at components/CommentBox.vue:34","获取评论数据失败:",e)}))})),(t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"comment-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o},[e.createElementVNode("view",null,"用户名: "+e.toDisplayString(t.username),1),e.createElementVNode("view",null,"评论内容: "+e.toDisplayString(t.comment),1),e.createElementVNode("view",null,"评论时间: "+e.toDisplayString(t.commentTime),1)])))),128))]))}},[["__scopeId","data-v-4d86abdb"]]),$={__name:"novel_details",setup(o){const l=e.ref(""),a=e.ref(null),s=e.computed((()=>{if(a.value&&a.value.upload_time){return(e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`)(new Date(a.value.upload_time))}return""}));return n((e=>{e.novel_id&&(l.value=e.novel_id,x(l.value).then((e=>{t("log","at pages/novel_details/novel_details.vue:68","后端返回的小说详情数据:",e),a.value=e})).catch((e=>{t("error","at pages/novel_details/novel_details.vue:72","获取小说详情失败:",e)})))})),(t,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("view",{class:"container"},[e.createElementVNode("view",{class:"novel-info"},[e.createElementVNode("view",{class:"novel-id"},"小说 ID: "+e.toDisplayString(l.value),1),a.value?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createElementVNode("view",null,"小说名称: "+e.toDisplayString(a.value.novel_name),1),e.createElementVNode("view",null,"小说分类: "+e.toDisplayString(a.value.novel_sort),1),e.createElementVNode("view",null,"上传时间: "+e.toDisplayString(s.value),1),e.createElementVNode("view",null,"点赞量:"+e.toDisplayString(a.value.likeCount),1),e.createElementVNode("view",null,[e.createTextVNode("标签: "),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value.tags,((t,o)=>(e.openBlock(),e.createElementBlock("span",{key:o,class:"tag"},e.toDisplayString(t),1)))),128))])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"button-container"},[a.value?(e.openBlock(),e.createBlock(I,{key:0,"novel-id":l.value,"novel-details":a.value},null,8,["novel-id","novel-details"])):e.createCommentVNode("",!0),e.createVNode(A,{"novel-id":l.value},null,8,["novel-id"]),e.createVNode(D,{"novel-id":l.value},null,8,["novel-id"]),e.createVNode(L,{"novel-id":l.value},null,8,["novel-id"])])])]),e.createVNode(P)],64))}};const F=a({data:()=>({username:"",password:""}),methods:{async login(){try{const n=await(e=this.username,o=this.password,new Promise(((t,n)=>{uni.request({url:`${k}/api/login`,method:"POST",data:{username:e,password:o},header:{"Content-Type":"application/x-www-form-urlencoded"},success:e=>{t(e)},fail:e=>{n(e)}})})));if(200!==n.statusCode)throw new Error("用户名或密码错误");t("log","at pages/login/login.vue:33","登录成功",n),uni.setStorageSync("token",n.data),uni.switchTab({url:"/pages/profile/profile"})}catch(n){t("error","at pages/login/login.vue:44","登录失败",n),uni.showToast({title:"登录失败，请检查用户名和密码",icon:"none"})}var e,o},register(){t("log","at pages/login/login.vue:54","点击了注册按钮"),uni.navigateTo({url:"/pages/register/register"})}}},[["render",function(t,o,n,l,a,s){return e.openBlock(),e.createElementBlock("view",{class:"login-container"},[e.createElementVNode("view",{class:"input-group"},[e.createElementVNode("label",{for:"username"},"用户名:"),e.withDirectives(e.createElementVNode("input",{type:"text",id:"username","onUpdate:modelValue":o[0]||(o[0]=e=>a.username=e),placeholder:"请输入用户名"},null,512),[[e.vModelText,a.username]])]),e.createElementVNode("view",{class:"input-group"},[e.createElementVNode("label",{for:"password"},"密码:"),e.withDirectives(e.createElementVNode("input",{type:"password",id:"password","onUpdate:modelValue":o[1]||(o[1]=e=>a.password=e),placeholder:"请输入密码"},null,512),[[e.vModelText,a.password]])]),e.createElementVNode("view",{class:"button-group"},[e.createElementVNode("button",{onClick:o[2]||(o[2]=(...e)=>s.login&&s.login(...e))},"登录"),e.createElementVNode("button",{onClick:o[3]||(o[3]=(...e)=>s.register&&s.register(...e))},"注册")])])}],["__scopeId","data-v-55b5c789"]]);const O=a({data:()=>({username:"",password:"",confirmPassword:""}),methods:{async register(){var e,o;if(this.password===this.confirmPassword)try{t("log","at pages/register/register.vue:41","注册成功",await(e=this.username,o=this.password,new Promise(((t,n)=>{uni.request({url:`${k}/api/register`,method:"POST",data:{username:e,password:o},success:e=>{t(e.data)},fail:e=>{n(e)}})})))),uni.showToast({title:"注册成功",icon:"success"}),uni.navigateTo({url:"/pages/login/login"})}catch(n){t("error","at pages/register/register.vue:49","注册失败",n),uni.showToast({title:"注册失败，请稍后重试",icon:"none"})}else uni.showToast({title:"两次输入的密码不一致，请重新输入！",icon:"none"})}}},[["render",function(t,o,n,l,a,s){return e.openBlock(),e.createElementBlock("view",{class:"registration-container"},[e.createElementVNode("view",{class:"input-group"},[e.createElementVNode("label",{for:"username"},"用户名:"),e.withDirectives(e.createElementVNode("input",{type:"text",id:"username","onUpdate:modelValue":o[0]||(o[0]=e=>a.username=e),placeholder:"请输入用户名"},null,512),[[e.vModelText,a.username]])]),e.createElementVNode("view",{class:"input-group"},[e.createElementVNode("label",{for:"password"},"密码:"),e.withDirectives(e.createElementVNode("input",{type:"password",id:"password","onUpdate:modelValue":o[1]||(o[1]=e=>a.password=e),placeholder:"请输入密码"},null,512),[[e.vModelText,a.password]])]),e.createElementVNode("view",{class:"input-group"},[e.createElementVNode("label",{for:"confirmPassword"},"确认密码:"),e.withDirectives(e.createElementVNode("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":o[2]||(o[2]=e=>a.confirmPassword=e),placeholder:"请再次输入密码"},null,512),[[e.vModelText,a.confirmPassword]])]),e.createElementVNode("button",{onClick:o[3]||(o[3]=(...e)=>s.register&&s.register(...e))},"注册")])}],["__scopeId","data-v-8839c7ba"]]);const U=a({data:()=>({novelInfos:[]}),onLoad(e){const t=e.novelIds;t&&this.fetchNovelDetails(t)},methods:{async fetchNovelDetails(e){try{const t=await(e=>new Promise(((t,o)=>{uni.request({url:`${k}/api/novelDetails`,method:"GET",data:{novelIds:e},success:e=>{t(e.data)},fail:e=>{o(e)}})})))(e);this.novelInfos=t}catch(o){t("error","at pages/search_result/search_result.vue:36","获取小说详情出错:",o)}},goToNovelDetails(e){uni.navigateTo({url:`/pages/novel_details/novel_details?novel_id=${e}`})}}},[["render",function(t,o,n,l,a,s){return e.openBlock(),e.createElementBlock("view",null,[a.novelInfos.length?(e.openBlock(),e.createElementBlock("view",{key:0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.novelInfos,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o,class:"novel-item",onClick:e=>s.goToNovelDetails(t.novel_id)},[e.createElementVNode("text",null,e.toDisplayString(t.novel_name),1)],8,["onClick"])))),128))])):(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("text",null,"暂无小说详情")]))])}]]);__definePage("pages/bookstore/bookstore",b),__definePage("pages/bookshelf/bookshelf",E),__definePage("pages/profile/profile",V),__definePage("pages/sign_in/sign_in",N),__definePage("pages/upload/upload",B),__definePage("pages/search/search",C),__definePage("pages/sort/sort",S),__definePage("pages/novel_details/novel_details",$),__definePage("pages/login/login",F),__definePage("pages/register/register",O),__definePage("pages/search_result/search_result",U);const j={onLaunch:function(){t("log","at App.vue:4","App Launch")},onShow:function(){t("log","at App.vue:7","App Show")},onHide:function(){t("log","at App.vue:10","App Hide")}};const{app:z,Vuex:M,Pinia:H}={app:e.createVueApp(j)};uni.Vuex=M,uni.Pinia=H,z.provide("__globalStyles",__uniConfig.styles),z._component.mpType="app",z._component.render=()=>{},z.mount("#app")}(Vue);
